\chapter{Advancing solutions to issues in ILP}\label{chap:advancing_solutions_to_issues_in_ilp}
The objective of this chapter is to provide extensions and future directions for the existing approaches to the issues in ILP by the ILP systems classified. Some of the extensions are used in the implementation of an ILP system Rationale described in \autoref{chap:rationale_ilp_system}.

\section{Inverse Subsumption for Complete Explanatory Induction}\cite{yamamoto2012inverse}
Influenced by the results in \cite{yamamoto2012inverse}, we seek further extensions.

\subsection{Extension to first-order theories}
A generalization of the antisubsumption results to the first-order clausal theories enables a more efficient computation of the minimal complement, especially if the number of potential tautologies is large and a computation of anti-subsumption since there is less need to search for a subsumed hypothesis as the hypothesis is already not ground.

\begin{proposition}\label{soundness_first_order_extension}(Soundness of the first-order extension)
Let $B$, $E$ and $I_H$ be a first-order background theory, examples and an induction field, respectively. Let $F$ be a bridge theory wrt $B$ and $E$. Suppose that $H \subsumes \tau(M(F \cup Taut(I_H)))$, then $B \cup H \models E$.
\end{proposition}
\begin{proof}
By subsumption $H \models \tau(M(F \cup Taut(I_H))) \equiv \neg F$. By the principle of the inverse entailment $B \cup \neg F \models E$, hence
$B \cup H \models E$.
\end{proof}

However, it is not clear whether the completeness is preserved in the first order case.

$\tau'(S)$ denotes the clausal theory obtained by removing every clause from $S$ that has a ground instance that factors to a tautology. $I_H$ is an induction field of not necessarily ground literals.

\begin{conjecture}\label{subsumptionConjectureFirstOrder}
Let $B$, $E$ and $I_H$ be a background theory, examples and an induction field, respectively. Let $F$ be a bridge theory wrt $B$ and $E$. For every hypothesis $H$ wrt $I_H$ and $F$, $H$ satisfies the following condition:
$H \subsumes \tau'(M(F \cup Taut(I_H)))$.
\end{conjecture}

\begin{exmp}
Let $E=\{r(y)\}$,
$B=\{\neg p(x) \vee r(x)\}$,
$H=\{s(x), \neg s(x) \vee p(x)\}$,
$I_H=\{s(x), \neg s(x), p(x)\}$.
Then $F=B \cup \neg E=\{\neg p(x) \vee r(x), \neg r(y) \}$.
$Taut(I_H)=\{s(x) \vee \neg s(x)\}$.
$M(F \cup Taut(I_H))=$
$\{p(x) \vee r(y) \vee \neg s(z), p(x) \vee r(y) \vee s(z),$
$\neg r(x) \vee r(y) \vee \neg s(z),\neg r(x) \vee r(y) \vee s(z) \}$.

$\tau'(M(F \cup Taut(I_H))=\{p(x) \vee r(y) \vee \neg s(z), p(x) \vee r(y) \vee s(z)\}$ which is subsumed by the hypothesis $H$.
\end{exmp}

\begin{exmp}
All theories need not be grounded. Adapting the previous example, if the examples were
$E_2=\{r(a), r(b)\}$ with the same hypothesis
$H=\{s(x), \neg s(x) \vee p(x)\}$, then
$\tau'(M(F_2 \cup Taut(I_H))=\{p(x) \vee r(a) \vee \neg s(z), p(x) \vee r(a) \vee s(z), p(x) \vee r(b) \vee \neg s(z), p(x) \vee r(b) \vee s(z) \}$ which is subsumed by $H$. A careful reader notices that the adapted $\tau'(M(F_2 \cup Taut(I_H))$ is just a partial instantiation of the previous
$\tau'(M(F \cup Taut(I_H))$ with the same substitution
$theta=\{a / y, b / y\}$ as used for the examples:
$\tau'(M(F_2 \cup Taut(I_H)) \theta=\tau'(M(F_2 \cup Taut(I_H))$,
$E_2 \theta = E$.
\end{exmp}

\subsection{Relaxation of minimal complements to a maximal bridge theory}
We relax the procedure of the minimal complements by using a maximal bridge theory\fullref{maximal_bridge_theory_definition} while preserving the completeness for finding correct hypotheses wrt to $B, E, \mathcal{I}_H$.

\begin{defn}
Let $B$, $E$, $\mathcal{I}_H$ be background knowledge, examples, an induction field. Then a \emph{hypothesis subsumer} wrt $B, E, \mathcal{I}_H, F$ is a theory
$T=\tau(M(F \cup Taut(\mathcal{I}_H))$ (recall $M(S)=\mu(\bar{S})$) for a bridge theory $F$ wrt $B, E$.
\end{defn}

\begin{defn}
Let $B$, $E$, $\mathcal{I}_H$ be background knowledge, examples, an induction field. Then a \emph{maximal hypothesis antisubsumer} wrt $B, E, \mathcal{I}_H$ is a theory
$T=\tau(M(F \cup Taut(\mathcal{I}_H))$ for a maximal bridge theory $F=B \land \bar{E}$ wrt $B, E$.
\end{defn}

By the completeness of inverse subsumption with minimal complements, for every hypothesis $H$ wrt $F$ and $\mathcal{I}_H$ it holds $H \subsumes \tau(M(F \cup Taut(\mathcal{I}_H))$. Since a maximal bridge theory $F$ is used, if a hypothesis $H$ wrt $\mathcal{I}_H$ is correct wrt $B, E$, then it can be derived by inverse subsumption with minimal complements with a maximal bridge theory.

\begin{defn}
A hypothesis $H$ is derived by \emph{inverse subsumption with minimal complements with a maximal bridge theory} wrt $B, E, \mathcal{I}_H$ iff
$H \subsumes \tau(M(B \cup \bar{E} \cup Taut(\mathcal{I}_H))$.
\end{defn}

\begin{lemma}\label{lemma_hypothesis_wrt_bridge_theory_correspondence}
Suppose $H$ is a hypothesis wrt an induction field $\mathcal{I}_H$ and a bridge theory $F_i$ wrt $B, E$. Then $H$ is a hypothesis wrt an induction field $\mathcal{I}_H$ and a maximal bridge theory $F=B \cup \bar{E}$ wrt $B, E$.
\end{lemma}
\begin{proof}
By \fullref{definition_bridge_theory} $F_i$ is a bridge theory wrt $B, E$ iff $B \cup \bar{E} \models F_i$ by \fullref{maximal_bridge_theory_definition} iff $F \models F_i$.
$H$ is a hypothesis wrt $\mathcal{I_H}$, $F_i$. Hence by \fullref{definition_hypothesis_wrt_induction_field_bridge_theory} there is a ground hypothesis $H_g$ such that $H_g$ consists of instances from $H$,
$F_i \models \neg H_g$ and $H_g$ belongs to $\mathcal{I}_H$. Hence $F \models F_i \models \neg H_g$ and thus by \fullref{definition_hypothesis_wrt_induction_field_bridge_theory} $H$ is a hypothesis wrt $\mathcal{I}_H$ and a maximal bridge theory $F$.
\end{proof}

\begin{proposition}\emph{Completeness of inverse subsumption with minimal complements with a maximal bridge theory}.
Let $H$ be a hypothesis wrt an induction field $\mathcal{I}_H$ and a bridge theory $F_i$ wrt $B, E$, then $H$ can be derived by inverse subsumption with minimal complements with a maximal bridge theory.
\end{proposition}

\begin{proof}
By \fullref{lemma_hypothesis_wrt_bridge_theory_correspondence} $H$ is a hypothesis wrt $\mathcal{I}_H$ and a maximal bridge theory $F=B \cup \bar{E}$.
Hence by \fullref{yamamoto2012inverseLemma2} $H \subsumes \tau(M(B \cup \bar{E} \cup Taut(\mathcal{I}_H))$.
\end{proof}

\subsubsection{Comparison with the original algorithm}
Minimal complements with a maximal bridge theory is a special case of the original minimal complements algorithm where the bridge theory $F$ is required to be maximal, i.e. $F=B \cup \bar{E}$. The requirement for a maximal bridge theory $B \cup \bar{E}$ results in an in efficiency if the background knowledge $B$ is large. The advantage of the restricted algorithm is its simplicity and the preservation of completeness for finding a hypothesis $H$ wrt $\mathcal{I}_H, F_i$ wrt $B,E$, therefore providing an opportunity to improve the efficiency in a different direction.

\subsection{Inverse subsumption with minimal complements and connected theory}
There may be a direct correspondence between the theory subsuming a target hypothesis constructed by minimal complements and the connected theory.

\begin{conjecture}
Let $P=\langle B, U, I \rangle$ be a definite open program, let $H$ be a definite, and $e$ an atom with $E^+=\{e\}$. Suppose that $H$ is an inductive solution for $P$ and $E^+$ wrt an induction field $\mathcal{I}_H$ and a bridge theory $F$.
Then $T=\tau(M(F \cup Taut(\mathcal{I}_H)))$ is a connected theory for $P$ and $E$ and $H \subsumes T$.
\end{conjecture}

\subsection{Negative examples}
For a non-monotonic consequence opearator $\models$, there are two possible constrains the negative examples may introduce on a hypothesis $H$ wrt $B, E^+$, $E^-$.
\begin{enumerate}
\item\label{first_negative_examples_constraint} $B \cup H \models \neg E^-$,
\item\label{second_negative_examples_constraint} $B \cup H \not\models E^-$.
\end{enumerate}
\ref{first_negative_examples_constraint} constraint implies \ref{second_negative_examples_constraint} assuming that $B \cup H \not\models false$, but not vice versa. Inverse subsumption with minimal complements algorithm covers the \ref{first_negative_examples_constraint} case since $B \cup H \models E = E^+ \cup \neg E^- = E^+ \land \neg E^-$ and a bridge theory used is a bridge theory wrt $B$ and both positive and negative examples. For the \ref{second_negative_examples_constraint} case, one has to construct a bridge theory wrt $B$, $E^+$ only, then check the constraint imposed by the negative examples $E^-$ separately. However, it is possible to construct a bridge theory $F_i$ wrt $B$ and $\{e\}$ for every ground example $e \in E^-$. Then one can still use the inverse subsumption algorithm to check \ref{second_negative_examples_constraint}.

\begin{proposition}
Let $H$ be a hypothesis wrt an induction field $\mathcal{I}_H$ and any bridge theory wrt $B, E+$. Then $B \cup H \not\models E^-$ iff $\forall e \in E^-. H \not\subsumes \tau(M(B \cup \{\neg e\} \cup Taut(\mathcal{I}_H)))$.
\end{proposition}
\begin{proof}
As $E^-$ is a disjunction of negative examples $e$, it is sufficient to prove
$B \cup H \not\models e$ iff
$H \not\subsumes \tau(M(B \cup \{\neg e\} \cup Taut(\mathcal{I}_H)))$ for an arbitrary negative example $e$ which is equivalent to proving
$B \cup H \models e$ iff $H \subsumes \tau(M(B \cup \{\neg e\} \cup Taut(\mathcal{I}_H)))$. But this follows from \ref{yamamoto2012inverseLemma2} and \ref{soundness_first_order_extension}.
\end{proof}

\subsubsection{Complete inverse subsumption operators}\label{complete_inverse_subsumption_operators}
Based on the work by Yamamoto et al. on the generalization operators\cite{yamamoto2008towards} it is proved that every theory $S$ subsuming a theory $T$ can be derived by antisumbsumption using two generalization operators dropping and antiinstantiation.

\begin{defn}
A logic theory $S$ is derivable from the logic theory $T$ by \emph{dropping} denoted $T \vdash_d S$ iff
$\forall D \in T. \exists C \in S. C \subseteq D$.
\end{defn}

\begin{exmp}
$\{p \lor q\} \vdash_d \{p, q\}$.
\end{exmp}

\begin{defn}
A logic theory $S$ is derivable from the logic theory $T$ by \emph{antiinstantiation} denoted $T \vdash_a S$ iff
$\forall D \in T. \exists$ a substitution $\theta$, $\exists C \in S. C\theta = D$.
\end{defn}

\begin{exmp}
If $T=\{p(X) \lor q(X), r(X)\}$, then $T\vdash_a\{p(a) \lor q(a), r(X)\}$,
but $T\not\vdash_a\{p(a) \lor q(b), r(X)\}$.
\end{exmp}

\begin{proposition}(Completeness of dropping and antiinstantiation for antisumption).
Suppose that a logic theory $S$ theory-subsumes a logic theory $T$, then $S$ is derivable by dropping and antiinstantiation from $T$:
$S \subsumes T \implies \exists U. T \vdash_d U \vdash_a S$.
\end{proposition}
\begin{proof}
Suppose that $S$ theory-subsumes $T$, then by \ref{definition_theory_subsumption} for any clause $D \in T$, there is a clause $C_D \in S$ such
that $C_D \subsumes D$, i.e. $\exists \theta_{D}. C_D \theta_D \subseteq D$.
Then construct a theory $U=\{C_D \theta_D | D \in T \}$.
Since $\forall D \in T \exists C_D \theta_D \in U. C_D \theta_D \subseteq D$, thus $T \vdash_d U$.
Since $\forall C_D \theta_D \in U \exists C_D \in S. C_D \theta_D=C_D \theta_D$, thus $U \vdash_d S$. Hence $T \vdash_d U \vdash_a S$.
\end{proof}